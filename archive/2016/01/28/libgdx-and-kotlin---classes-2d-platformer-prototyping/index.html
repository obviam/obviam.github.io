<!DOCTYPE html>
<html>

    <head>
        <title> libgdx and Kotlin - Classes [2D Platformer Prototyping] &middot; Obviam - Game Development Tutorials and Musings in Software Development </title>

        <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.13" />


<script   src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<link rel="stylesheet" href="https://obviam.github.io/css/nix.css">

 
<link href="https://fonts.googleapis.com/css?family=Inconsolata|Open+Sans|Roboto|Montserrat|Concert+One|Source+Code+Pro:400,700" rel="stylesheet">



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17403436-1', 'auto');
	  ga('send', 'pageview');

</script>


    </head>

    <body>
        <header>
<nav class="navbar navbar-default navbar-fixed-top navbar-inverse font-header">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" id="green-terminal" href=https://obviam.github.io/>impaler@obviam.net ~ $</a>
		</div>

		
		<div class="collapse navbar-collapse" id="navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				<li>
					<a href="https://obviam.github.io/">/home/impaler</a>
				</li>
				
				
				<li >
					<a href="/blog-tmp">~/blog</a>
				</li>
				
				
				<li >
					<a href="/plan">~/.plan</a>
				</li>
				
				
				<li >
					<a href="/archive">~/archive</a>
				</li>
				
				
				<li >
					<a href="/about">~/about</a>
				</li>
				

			</ul>
		</div>
	</div>
</nav>
</header>

        <div class="container wrapper">
            <h1><a href="https://obviam.github.io/archive/2016/01/28/libgdx-and-kotlin---classes-2d-platformer-prototyping/">libgdx and Kotlin - Classes [2D Platformer Prototyping]</a></h1>
            <span class="post-date">Jan 28, 2016 </span>
            <div class="post-content">
                <p>This post is a follow up of the <a href="/archive/libgdx-and-kotlin" title="libgdx and Kotlin">libgdx and Kotlin</a> post.</p>

<p>I have decided to prototype a simple 2D platformer (along the lines of Star Assault from my early posts), but instead of Java, I am using and learning Kotlin along the way.</p>

<p>For this tutorial, the project should be in its initial state from the previous post. A bare-bone libGdx Java project turned into a Kotlin project. We&rsquo;ll be jamming away in our main <code>Game.kt</code> file, formerly <code>Nemo.kt</code>.</p>

<p>The project source for the initial state can be found <a href="https://github.com/obviam/kotlin-gdx-nemo/tree/v0.0.01" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','github.com']);" title="https://github.com/obviam/kotlin-gdx-nemo/tree/v0.0.01">here</a>.</p>

<blockquote>
<p>Kotlin doesn&rsquo;t require the file name to be the same as the class name, or even to be in the directory structure equivalent to the declared package.</p>
</blockquote>

<p>Without further ado, here&rsquo;s is the first change to the code.</p>

<p></p>

<p>The main class has been changed from <code>Nemo</code> to <code>Game</code>, because we will be using the name Nemo for the character.</p>

<p>So <code>Nemo.kt</code> -&gt; <code>Game.kt</code> as the first step.</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="background-color: #f0f0f0; padding: 0 5px 0 5px"> 1 </span><span style="color: #60a0b0; font-style: italic">// imports omitted</span>
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px"> 2 </span><span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">Game</span> : ApplicationAdapter() {
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px"> 3 </span>    <span style="color: #007020; font-weight: bold">internal</span> <span style="color: #007020; font-weight: bold">lateinit</span> <span style="color: #007020; font-weight: bold">var</span> batch: SpriteBatch
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px"> 4 </span>    <span style="color: #007020; font-weight: bold">internal</span> <span style="color: #007020; font-weight: bold">lateinit</span> <span style="color: #007020; font-weight: bold">var</span> img: Texture
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px"> 5 </span><span style="background-color: #ffffcc">    <span style="color: #007020; font-weight: bold">internal</span> <span style="color: #007020; font-weight: bold">lateinit</span> <span style="color: #007020; font-weight: bold">var</span> nemo: Nemo
</span><span style="background-color: #f0f0f0; padding: 0 5px 0 5px"> 6 </span>
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px"> 7 </span>    <span style="color: #007020; font-weight: bold">override</span> <span style="color: #007020; font-weight: bold">fun</span> <span style="color: #06287e">create</span>() {
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px"> 8 </span>        batch = SpriteBatch()
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px"> 9 </span><span style="background-color: #ffffcc">        img = Texture(<span style="color: #4070a0">&quot;images/nemo_01.png&quot;</span>)
</span><span style="background-color: #f0f0f0; padding: 0 5px 0 5px">10 </span><span style="background-color: #ffffcc">        nemo = Nemo()
</span><span style="background-color: #f0f0f0; padding: 0 5px 0 5px">11 </span>    }
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px">12 </span>
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px">13 </span>    <span style="color: #007020; font-weight: bold">override</span> <span style="color: #007020; font-weight: bold">fun</span> <span style="color: #06287e">render</span>() {
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px">14 </span>        Gdx.gl.glClearColor(<span style="color: #40a070">0f</span>, <span style="color: #40a070">0f</span>, <span style="color: #40a070">0f</span>, <span style="color: #40a070">1f</span>)
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px">15 </span>        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT)
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px">16 </span>        batch.begin()
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px">17 </span><span style="background-color: #ffffcc">        batch.draw(img, nemo.position.x, nemo.position.y)
</span><span style="background-color: #f0f0f0; padding: 0 5px 0 5px">18 </span>        batch.end()
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px">19 </span>    }
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px">20 </span>
<span style="background-color: #f0f0f0; padding: 0 5px 0 5px">21 </span><span style="background-color: #ffffcc">    <span style="color: #007020; font-weight: bold">data</span> <span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">Nemo</span>(<span style="color: #007020; font-weight: bold">val</span> position: Vector2 = Vector2(<span style="color: #40a070">0f</span>, <span style="color: #40a070">0f</span>))
</span><span style="background-color: #f0f0f0; padding: 0 5px 0 5px">22 </span>}
</pre></div>


<p>The highlighted lines show the changes.</p>

<p><strong>#05</strong> - Declare the attribute <code>nemo</code> of type <code>Nemo</code> and mark it for late initialisation.</p>

<p><strong>#09</strong> - load a different gif for the texture (check out the project on github)</p>

<p><strong>#10</strong> - instantiates the <code>Nemo</code> class. This is equivalent of the java <code>new Nemo();</code></p>

<p><strong>#21</strong> - This line creates a data class with one attribute, position of type Vector2 from libGdx, and defaults that vector to be new Vector2(0f, 0f) in case we omit it when initialising.</p>

<p>A data class is a data container class complete with generated <code>getters</code>, <code>setters</code> if the attribute is <code>var</code> instead of <code>val</code>, <code>equals</code>, <code>hashCode</code>, <code>toString</code>. Note the <code>val</code> qualifier for the attribute, meaning that the position is <code>final</code> and immutable. This means, once the vector is assigned to, it can&rsquo;t be modified. <em>The values of the vector can be modified however</em>. It&rsquo;s a good practice to make everything immutable unless otherwise required and Kotlin is designed to use this pattern as a default.</p>

<p>This is shorthand for</p>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #007020; font-weight: bold">public</span> <span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">Nemo</span> <span style="color: #666666">{</span>
    <span style="color: #60a0b0; font-style: italic">// val is the equivalent of final </span>
    <span style="color: #007020; font-weight: bold">private</span> <span style="color: #007020; font-weight: bold">final</span> Vector2 position<span style="color: #666666">;</span>

    <span style="color: #60a0b0; font-style: italic">// constructor with argument</span>
    <span style="color: #007020; font-weight: bold">public</span> <span style="color: #06287e">Nemo</span><span style="color: #666666">(</span>Vector2 position<span style="color: #666666">)</span> <span style="color: #666666">{</span>
        <span style="color: #007020; font-weight: bold">this</span><span style="color: #666666">.</span><span style="color: #4070a0">position</span> <span style="color: #666666">=</span> position<span style="color: #666666">;</span>
    <span style="color: #666666">}</span>
    
    <span style="color: #60a0b0; font-style: italic">// default constructor</span>
    <span style="color: #007020; font-weight: bold">public</span> <span style="color: #06287e">Nemo</span><span style="color: #666666">()</span> <span style="color: #666666">{</span>
        <span style="color: #007020; font-weight: bold">this</span><span style="color: #666666">.</span><span style="color: #4070a0">position</span> <span style="color: #666666">=</span> <span style="color: #007020; font-weight: bold">new</span> Vector2<span style="color: #666666">(</span><span style="color: #40a070">0f</span><span style="color: #666666">,</span> <span style="color: #40a070">0f</span><span style="color: #666666">);</span>
    <span style="color: #666666">}</span>

    <span style="color: #60a0b0; font-style: italic">// getter</span>
    <span style="color: #007020; font-weight: bold">public</span> Vector2 <span style="color: #06287e">getPosition</span><span style="color: #666666">()</span> <span style="color: #666666">{</span>
        <span style="color: #007020; font-weight: bold">return</span> position<span style="color: #666666">;</span>
    <span style="color: #666666">}</span>

    <span style="color: #555555; font-weight: bold">@Override</span>
    <span style="color: #007020; font-weight: bold">public</span> <span style="color: #902000">boolean</span> <span style="color: #06287e">equals</span><span style="color: #666666">(</span>Object o<span style="color: #666666">)</span> <span style="color: #666666">{</span>
        <span style="color: #007020; font-weight: bold">if</span> <span style="color: #666666">(</span><span style="color: #007020; font-weight: bold">this</span> <span style="color: #666666">==</span> o<span style="color: #666666">)</span> <span style="color: #007020; font-weight: bold">return</span> <span style="color: #007020; font-weight: bold">true</span><span style="color: #666666">;</span>
        <span style="color: #007020; font-weight: bold">if</span> <span style="color: #666666">(</span>o <span style="color: #666666">==</span> <span style="color: #007020; font-weight: bold">null</span> <span style="color: #666666">||</span> getClass<span style="color: #666666">()</span> <span style="color: #666666">!=</span> o<span style="color: #666666">.</span><span style="color: #4070a0">getClass</span><span style="color: #666666">())</span> <span style="color: #007020; font-weight: bold">return</span> <span style="color: #007020; font-weight: bold">false</span><span style="color: #666666">;</span>

        Nemo nemo <span style="color: #666666">=</span> <span style="color: #666666">(</span>Nemo<span style="color: #666666">)</span> o<span style="color: #666666">;</span>

        <span style="color: #007020; font-weight: bold">return</span> position <span style="color: #666666">!=</span> <span style="color: #007020; font-weight: bold">null</span> <span style="color: #666666">?</span> position<span style="color: #666666">.</span><span style="color: #4070a0">equals</span><span style="color: #666666">(</span>nemo<span style="color: #666666">.</span><span style="color: #4070a0">position</span><span style="color: #666666">)</span> <span style="color: #666666">:</span> nemo<span style="color: #666666">.</span><span style="color: #4070a0">position</span> <span style="color: #666666">==</span> <span style="color: #007020; font-weight: bold">null</span><span style="color: #666666">;</span>

    <span style="color: #666666">}</span>

    <span style="color: #555555; font-weight: bold">@Override</span>
    <span style="color: #007020; font-weight: bold">public</span> <span style="color: #902000">int</span> <span style="color: #06287e">hashCode</span><span style="color: #666666">()</span> <span style="color: #666666">{</span>
        <span style="color: #007020; font-weight: bold">return</span> position <span style="color: #666666">!=</span> <span style="color: #007020; font-weight: bold">null</span> <span style="color: #666666">?</span> position<span style="color: #666666">.</span><span style="color: #4070a0">hashCode</span><span style="color: #666666">()</span> <span style="color: #666666">:</span> <span style="color: #40a070">0</span><span style="color: #666666">;</span>
    <span style="color: #666666">}</span>

    <span style="color: #555555; font-weight: bold">@Override</span>
    <span style="color: #007020; font-weight: bold">public</span> String <span style="color: #06287e">toString</span><span style="color: #666666">()</span> <span style="color: #666666">{</span>
        <span style="color: #007020; font-weight: bold">return</span> <span style="color: #4070a0">&quot;Nemo{&quot;</span> <span style="color: #666666">+</span>
                <span style="color: #4070a0">&quot;position=&quot;</span> <span style="color: #666666">+</span> position <span style="color: #666666">+</span>
                <span style="color: #4070a0">&#39;}&#39;</span><span style="color: #666666">;</span>
    <span style="color: #666666">}</span>
<span style="color: #666666">}</span>
</pre></div>

<p>The whole class is replaced by one single line nested in the class. Semicolons are not needed either to mark the end of the instruction.</p>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span><span style="color: #007020; font-weight: bold">data</span> <span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">Nemo</span>(<span style="color: #007020; font-weight: bold">val</span> position: Vector2 = Vector2(<span style="color: #40a070">0f</span>, <span style="color: #40a070">0f</span>))
</pre></div>

<p><strong>#17</strong> - this instruction draws the texture loaded previously, at the position held by Nemo. The equivalent Java code would be</p>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>batch.draw(img, nemo.getPosition().getX(), nemo.getPosition().getY());
</pre></div>

<p>In Kotlin we don&rsquo;t need to specify the getter or setter, we use the dot notation to the attributes. It&rsquo;s all taken care of by the compiler and the accessor methods are inferred.</p>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>nemo.getPosition().getX()
</pre></div>

<p>becomes</p>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span></span>nemo.position.x
</pre></div>

<p>Try running the project so we can see the result:</p>

<p><a href="/images/archive/2016/01/Screen-Shot-2016-01-28-at-19.47.02.png"><img src="/images/archive/2016/01/Screen-Shot-2016-01-28-at-19.47.02.png" alt="Game Screen in Action" width="500" /></a></p>

<p>That&rsquo;s it for now. Make sure you consult the Kotlin documentation about <a href="https://kotlinlang.org/docs/reference/classes.html" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','kotlinlang.org']);" title="https://kotlinlang.org/docs/reference/classes.html" target="_blank">classes</a>, to understand more about them.</p>

<p>In the next part, we will be turning Nemo into an animated and movable character.</p>

<div class="download">
  <a href="https://github.com/obviam/kotlin-gdx-nemo/tree/v0.0.02" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','github.com']);" title="https://github.com/obviam/kotlin-gdx-nemo/tree/v0.0.02">Get the source code here</a>
</div>
            </div>
            
            <div class="post-comments">
                
            </div>
            
            <div class="push"></div>
        </div>
        <footer class="footer text-center">
<p>Copyright &copy; 2017 obviam.net -
<span class="credit">
	Powered by 
	<a target="_blank" href="https://gohugo.io">Hugo</a>
	and 
	<a target="_blank" href="https://github.com/LordMathis/hugo-theme-nix/">Nix</a> theme.
</span>
</p>
</footer>

    </body>
